# Логирование селектора стилей [SELECT]

## Обзор

Добавлена система логирования для селектора стилей с тегом `[SELECT]` для отслеживания всех операций с выбором и установкой стилей игроков.

## Добавленные логи

### 1. **Создание селектора**
```
[SELECT] Создание селектора стилей
```
- Вызывается при создании каждого селектора стилей
- Помогает отследить количество созданных селекторов

### 2. **Выбор игрока**
```
[SELECT] Выбран игрок Хакон Эвьен: hidden_style=3 → brazil
[SELECT] Эффективный стиль для Хакон Эвьен: кэш=нет, итого=brazil
[SELECT] Установлен стиль в селектор: brazil
```
- Показывает преобразование числового стиля в строковый
- Отображает логику выбора между кэшем и `hidden_style`
- Подтверждает установку стиля в селектор

### 3. **Изменение стиля пользователем**
```
[SELECT] Клик по стилю: brazil → sp
[SELECT] Вызываем onChange для стиля: sp
[SELECT] Изменение стиля: sp
[SELECT] Сохранен в кэш: игрок 5860450 → стиль sp
[SELECT] Применяем стиль к игроку Хакон Эвьен: sp
```
- Отслеживает клики пользователя по опциям стилей
- Показывает цепочку вызовов при изменении стиля
- Подтверждает сохранение в кэш

### 4. **Программная установка стиля**
```
[SELECT] setValue вызван: brazil → sp
[SELECT] Установлена иконка для стиля: sp
```
- Логирует программные вызовы `setValue()`
- Показывает изменения иконок

### 5. **Очистка данных**
```
[SELECT] Игрок не выбран, очищаем данные
[SELECT] Игрок не найден для ID: 123456, очищаем данные
```
- Отслеживает случаи очистки данных игрока
- Помогает диагностировать проблемы с выбором игроков

## Структура логов

### Формат логов:
```
[SELECT] <Действие>: <Детали>
```

### Типы действий:
- **Создание**: `Создание селектора стилей`
- **Выбор игрока**: `Выбран игрок <имя>: hidden_style=<число> → <стиль>`
- **Эффективный стиль**: `Эффективный стиль для <имя>: кэш=<стиль>, итого=<стиль>`
- **Установка**: `Установлен стиль в селектор: <стиль>`
- **Клик**: `Клик по стилю: <старый> → <новый>`
- **Изменение**: `Изменение стиля: <стиль>`
- **Кэширование**: `Сохранен в кэш: игрок <ID> → стиль <стиль>`
- **Применение**: `Применяем стиль к игроку <имя>: <стиль>`
- **Очистка**: `Игрок не выбран, очищаем данные`

## Примеры использования

### Отслеживание полного цикла выбора игрока:
```
[SELECT] Создание селектора стилей
[SELECT] Выбран игрок Хакон Эвьен: hidden_style=3 → brazil
[SELECT] Эффективный стиль для Хакон Эвьен: кэш=нет, итого=brazil
[SELECT] setValue вызван: norm → brazil
[SELECT] Установлена иконка для стиля: brazil
[SELECT] Установлен стиль в селектор: brazil
```

### Отслеживание изменения стиля пользователем:
```
[SELECT] Клик по стилю: brazil → sp
[SELECT] setValue вызван: brazil → sp
[SELECT] Установлена иконка для стиля: sp
[SELECT] Вызываем onChange для стиля: sp
[SELECT] Изменение стиля: sp
[SELECT] Сохранен в кэш: игрок 5860450 → стиль sp
[SELECT] Применяем стиль к игроку Хакон Эвьен: sp
```

## Диагностика проблем

### Проблема: Стиль не устанавливается
**Ищите логи:**
- `[SELECT] Выбран игрок` - проверьте преобразование `hidden_style`
- `[SELECT] setValue вызван` - проверьте программную установку
- `[SELECT] Установлена иконка` - проверьте визуальное отображение

### Проблема: Стиль не сохраняется
**Ищите логи:**
- `[SELECT] Сохранен в кэш` - проверьте сохранение в кэш
- `[SELECT] Эффективный стиль` - проверьте загрузку из кэша

### Проблема: Стиль не применяется к Chemistry
**Ищите логи:**
- `[SELECT] Применяем стиль к игроку` - проверьте применение к игроку
- `[CHEMISTRY]` - проверьте использование в Chemistry системе

## Фильтрация логов

### В консоли браузера:
```javascript
// Показать только логи селектора
console.log = (function(originalLog) {
    return function(...args) {
        if (args[0] && args[0].includes('[SELECT]')) {
            originalLog.apply(console, args);
        }
    };
})(console.log);
```

### Поиск в логах:
- `[SELECT]` - все логи селектора
- `[SELECT] Выбран игрок` - только выбор игроков
- `[SELECT] Клик` - только пользовательские действия
- `[SELECT] setValue` - только программные изменения

## Интеграция с другими системами

### Связь с Chemistry системой:
```
[SELECT] Применяем стиль к игроку Хакон Эвьен: sp
[CHEMISTRY] Хакон Эвьен: 12.5% Object { effective_style: "sp", ... }
```

### Связь с кэшированием:
```
[SELECT] Сохранен в кэш: игрок 5860450 → стиль sp
[SELECT] Эффективный стиль для Хакон Эвьен: кэш=sp, итого=sp
```

---
*Документация создана: February 3, 2026*
*Версия системы: 0.940*