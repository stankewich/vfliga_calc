# ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð»Ð¾Ð³Ð¸ÐºÐ¸ CM Ð¸ DM â†’ AM: ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸Ðº

## Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: âœ… Ð—ÐÐ’Ð•Ð Ð¨Ð•ÐÐž

### ÐžÐ±Ð·Ð¾Ñ€ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ

ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð° Ð»Ð¾Ð³Ð¸ÐºÐ° Ð¿Ñ€ÐµÐ²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ CM â†’ AM Ð¸ DM â†’ AM Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸ÐµÐ¼ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ "Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ ÑÑ€ÐµÐ´Ð¸ Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸ÐºÐ¾Ð² (CM, DM, AM, FR)" Ð´Ð»Ñ Ð¾Ð±ÐµÐ¸Ñ… Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹.

## Ð§Ñ‚Ð¾ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»Ð¾ÑÑŒ

### **CM â†’ AM (Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾):**

#### **Ð‘Ð«Ð›Ðž:**
```javascript
const isMaxCM = rowIndex === cmMax; // ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÑ€ÐµÐ´Ð¸ CM

if (!hasLW && !hasRW && amAbsent && isMaxCM) {
    add(options, 'AM');
}
```

#### **Ð¡Ð¢ÐÐ›Ðž:**
```javascript
// ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ ÑÑ€ÐµÐ´Ð¸ Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸ÐºÐ¾Ð²
const midfielderIndices = [];
positions.forEach((pos, idx) => {
    if (['CM', 'DM', 'AM', 'FR'].includes(pos)) {
        midfielderIndices.push(idx);
    }
});
const maxMidfielderIndex = midfielderIndices.length ? Math.max(...midfielderIndices) : null;
const isMaxMidfielder = rowIndex === maxMidfielderIndex;

if (!hasLW && !hasRW && amAbsent && isMaxMidfielder) {
    add(options, 'AM');
}
```

### **DM â†’ AM (Ð½Ð¾Ð²Ð¾Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð¾):**

#### **Ð‘Ð«Ð›Ðž:**
```javascript
const amAllowed = !is424 && amCount < 1 && !hasLW && !hasRW;

if (amAllowed) {
    add(options, 'AM');
}
```

#### **Ð¡Ð¢ÐÐ›Ðž:**
```javascript
// ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ ÑÑ€ÐµÐ´Ð¸ Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸ÐºÐ¾Ð²
const midfielderIndices = [];
positions.forEach((pos, idx) => {
    if (['CM', 'DM', 'AM', 'FR'].includes(pos)) {
        midfielderIndices.push(idx);
    }
});
const maxMidfielderIndex = midfielderIndices.length ? Math.max(...midfielderIndices) : null;
const isMaxMidfielder = rowIndex === maxMidfielderIndex;

const amAllowed = !is424 && amCount < 1 && !hasLW && !hasRW && isMaxMidfielder;

if (amAllowed) {
    add(options, 'AM');
}
```

## ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ Ð´Ð»Ñ â†’ AM

### **CM â†’ AM (Ð²ÑÐµ 4 ÑƒÑÐ»Ð¾Ð²Ð¸Ñ):**
1. **Ð¤Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ ÐÐ• 4-2-4:** `!is424`
2. **ÐÐµÑ‚ Ð²Ð¸Ð½Ð³ÐµÑ€Ð¾Ð²:** `!hasLW && !hasRW`
3. **ÐÐµÑ‚ AM Ð² ÑÐ¾ÑÑ‚Ð°Ð²Ðµ:** `amAbsent` (AM < 1)
4. **ðŸ†• ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸Ðº:** `isMaxMidfielder`

### **DM â†’ AM (Ð²ÑÐµ 5 ÑƒÑÐ»Ð¾Ð²Ð¸Ð¹):**
1. **Ð¤Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ ÐÐ• 4-2-4:** `!is424`
2. **ÐÐµÑ‚ Ð²Ð¸Ð½Ð³ÐµÑ€Ð¾Ð²:** `!hasLW && !hasRW`
3. **ÐÐµÑ‚ AM Ð² ÑÐ¾ÑÑ‚Ð°Ð²Ðµ:** `amCount < 1`
4. **ðŸ†• ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸Ðº:** `isMaxMidfielder`
5. **ÐÐµ Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½ Ð² 3-6-1:** `!locked` (Ð½Ðµ ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ DM Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ 3-6-1)

## ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð½Ð¾Ð²Ð¾Ð¹ Ð»Ð¾Ð³Ð¸ÐºÐ¸

### **ÐŸÑ€Ð¸Ð¼ÐµÑ€ 1: CM Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM**
```javascript
["GK", "LD", "CD", "CD", "RD", "DM", "CM", "RM", "CF", "CF", "CF"]
//                              â†‘DM(5) â†‘CM(6) <- Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸Ðº

// midfielderIndices = [5, 6] (DM Ð½Ð° 5, CM Ð½Ð° 6)
// maxMidfielderIndex = 6
// Ð”Ð»Ñ CM Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ 6: isMaxMidfielder = true
// Ð Ð•Ð—Ð£Ð›Ð¬Ð¢ÐÐ¢: CM Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM
```

### **ÐŸÑ€Ð¸Ð¼ÐµÑ€ 2: CM ÐÐ• Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM (ÐµÑÑ‚ÑŒ FR Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸)**
```javascript
["GK", "LD", "CD", "CD", "RD", "CM", "DM", "FR", "CF", "CF", "CF"]
//                              â†‘CM(5) â†‘DM(6) â†‘FR(7) <- Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸Ðº

// midfielderIndices = [5, 6, 7] (CM, DM, FR)
// maxMidfielderIndex = 7
// Ð”Ð»Ñ CM Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ 5: isMaxMidfielder = false
// Ð Ð•Ð—Ð£Ð›Ð¬Ð¢ÐÐ¢: CM ÐÐ• Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM (FR Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸)
```

### **ÐŸÑ€Ð¸Ð¼ÐµÑ€ 5: DM Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM**
```javascript
["GK", "LD", "CD", "CD", "RD", "CM", "DM", "RM", "CF", "CF", "CF"]
//                              â†‘CM(5) â†‘DM(6) <- Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸Ðº

// midfielderIndices = [5, 6] (CM Ð½Ð° 5, DM Ð½Ð° 6)
// maxMidfielderIndex = 6
// Ð”Ð»Ñ DM Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ 6: isMaxMidfielder = true
// Ð Ð•Ð—Ð£Ð›Ð¬Ð¢ÐÐ¢: DM Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM
```

### **ÐŸÑ€Ð¸Ð¼ÐµÑ€ 6: DM ÐÐ• Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM (ÐµÑÑ‚ÑŒ CM Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸)**
```javascript
["GK", "LD", "CD", "CD", "RD", "DM", "CM", "RM", "CF", "CF", "CF"]
//                              â†‘DM(5) â†‘CM(6) <- Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸Ðº

// midfielderIndices = [5, 6] (DM Ð½Ð° 5, CM Ð½Ð° 6)
// maxMidfielderIndex = 6
// Ð”Ð»Ñ DM Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ 5: isMaxMidfielder = false
// Ð Ð•Ð—Ð£Ð›Ð¬Ð¢ÐÐ¢: DM ÐÐ• Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM (CM Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸)
```

### **ÐŸÑ€Ð¸Ð¼ÐµÑ€ 7: Ð•Ð´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ DM Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM**
```javascript
["GK", "LD", "CD", "CD", "RD", "LM", "DM", "RM", "CF", "CF", "CF"]
//                                      â†‘DM(6) <- ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð¸ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸Ðº

// midfielderIndices = [6] (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ DM)
// maxMidfielderIndex = 6
// Ð”Ð»Ñ DM Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ 6: isMaxMidfielder = true
// Ð Ð•Ð—Ð£Ð›Ð¬Ð¢ÐÐ¢: DM Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM
```

### **ÐŸÑ€Ð¸Ð¼ÐµÑ€ 3: CM ÐÐ• Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM (ÐµÑÑ‚ÑŒ AM Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸)**
```javascript
["GK", "LD", "CD", "CD", "RD", "CM", "CM", "AM", "CF", "CF", "CF"]
//                              â†‘CM(5) â†‘CM(6) â†‘AM(7) <- Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸Ðº

// midfielderIndices = [5, 6, 7] (CM, CM, AM)
// maxMidfielderIndex = 7
// Ð”Ð»Ñ CM Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ 6: isMaxMidfielder = false
// Ð Ð•Ð—Ð£Ð›Ð¬Ð¢ÐÐ¢: CM ÐÐ• Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM (AM ÑƒÐ¶Ðµ ÐµÑÑ‚ÑŒ Ð¸ Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸)
```

### **ÐŸÑ€Ð¸Ð¼ÐµÑ€ 4: Ð¡Ð»Ð¾Ð¶Ð½Ð°Ñ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ñ Ñ DM**
```javascript
["GK", "LD", "CD", "RD", "LM", "DM", "CM", "CM", "RM", "CF", "CF"]
//                              â†‘DM(5) â†‘CM(6) â†‘CM(7) <- Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸Ðº

// midfielderIndices = [5, 6, 7] (DM, CM, CM)
// maxMidfielderIndex = 7
// Ð”Ð»Ñ CM Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ 7: isMaxMidfielder = true
// Ð Ð•Ð—Ð£Ð›Ð¬Ð¢ÐÐ¢: CM Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ 7 Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM
// Ð”Ð»Ñ CM Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ 6: isMaxMidfielder = false
// Ð Ð•Ð—Ð£Ð›Ð¬Ð¢ÐÐ¢: CM Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ 6 ÐÐ• Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM
```

## Ð›Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð¾ÑÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ

### **ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸Ðº?**

#### **1. Ð¢Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ°:**
- **AM** - ÑÐ°Ð¼Ð°Ñ Ð¿ÐµÑ€ÐµÐ´Ð½ÑÑ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ Ð² Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ðµ
- Ð›Ð¾Ð³Ð¸Ñ‡Ð½Ð¾, Ñ‡Ñ‚Ð¾ Ð² AM Ð¿Ñ€ÐµÐ²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ÑÑ ÑÐ°Ð¼Ñ‹Ð¹ Ð¿ÐµÑ€ÐµÐ´Ð½Ð¸Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸Ðº
- Ð£Ñ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ Ð²ÑÐµ Ñ‚Ð¸Ð¿Ñ‹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸ÐºÐ¾Ð²: CM, DM, AM, FR

#### **2. ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ð¾Ð½Ð½Ð°Ñ Ð¸ÐµÑ€Ð°Ñ€Ñ…Ð¸Ñ:**
```
Ð—Ð°Ñ‰Ð¸Ñ‚Ð° â†’ ÐŸÐ¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð° â†’ ÐÑ‚Ð°ÐºÐ°
         â†‘
         DM â†’ CM â†’ AM/FR â†’ ÐÐ°Ð¿Ð°Ð´Ð°ÑŽÑ‰Ð¸Ðµ
              â†‘
              ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ = Ð±Ð»Ð¸Ð¶Ðµ Ðº Ð°Ñ‚Ð°ÐºÐµ
```

#### **3. ÐŸÑ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚Ð¾Ð²:**
- Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ FR Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸ CM, Ñ‚Ð¾ CM Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM
- Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ AM Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸ CM, Ñ‚Ð¾ CM Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM (Ð¸ amAbsent = false)
- Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ DM Ð¿Ð¾Ð·Ð°Ð´Ð¸ CM, Ñ‚Ð¾ CM Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ AM (ÐµÑÐ»Ð¸ Ð¾Ð½ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹)

### **4. Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ:**
- Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð´Ð»Ñ Ð»ÑŽÐ±Ñ‹Ñ… ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸Ð¹ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸ÐºÐ¾Ð²
- Ð£Ñ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð²ÑÐµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ñ‹Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸: CM, DM, AM, FR
- Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹

## Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´ÐµÑ‚Ð°Ð»Ð¸

### **ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸ÐºÐ¾Ð²:**
```javascript
if (['CM', 'DM', 'AM', 'FR'].includes(pos)) {
    midfielderIndices.push(idx);
}
```

### **ÐŸÐ¾Ð¸ÑÐº Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¸Ð½Ð´ÐµÐºÑÐ°:**
```javascript
const maxMidfielderIndex = midfielderIndices.length ? Math.max(...midfielderIndices) : null;
```

### **ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑƒÑÐ»Ð¾Ð²Ð¸Ñ:**
```javascript
const isMaxMidfielder = rowIndex === maxMidfielderIndex;
```

### **ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ð¾Ðµ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ:**
```javascript
console.log(`[PositionLogic] CMâ†’AM Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð»Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ ${rowIndex}:`, {
    hasLW, hasRW, amAbsent, isMaxMidfielder, maxMidfielderIndex, midfielderIndices,
    canBecomeAM: !hasLW && !hasRW && amAbsent && isMaxMidfielder
});
```

## Ð’Ð»Ð¸ÑÐ½Ð¸Ðµ Ð½Ð° Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸

### **Ð¡Ð¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚ÑŒ:**
- âœ… **DM Ð»Ð¾Ð³Ð¸ÐºÐ°:** ÐÐµ Ð·Ð°Ñ‚Ñ€Ð¾Ð½ÑƒÑ‚Ð°
- âœ… **AM Ð»Ð¾Ð³Ð¸ÐºÐ°:** ÐÐµ Ð·Ð°Ñ‚Ñ€Ð¾Ð½ÑƒÑ‚Ð°  
- âœ… **FR Ð»Ð¾Ð³Ð¸ÐºÐ°:** ÐÐµ Ð·Ð°Ñ‚Ñ€Ð¾Ð½ÑƒÑ‚Ð°
- âœ… **Ð¤Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ 4-2-4:** Ð˜ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾

### **Ð¡Ð¾Ð³Ð»Ð°ÑÐ¾Ð²Ð°Ð½Ð½Ð¾ÑÑ‚ÑŒ:**
- Ð›Ð¾Ð³Ð¸ÐºÐ° ÑÐ¾Ð³Ð»Ð°ÑÑƒÐµÑ‚ÑÑ Ñ FR â†’ AM (Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ ÑÑ€ÐµÐ´Ð¸ Ñ†ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ñ‹Ñ…)
- ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿ "Ð±Ð»Ð¸Ð¶Ðµ Ðº Ð°Ñ‚Ð°ÐºÐµ = Ð±Ð¾Ð»ÑŒÑˆÐµ Ð¿Ñ€Ð°Ð² Ð½Ð° AM"

## Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸

### **Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸:**

#### **CM â†’ AM:**
- [ ] CM â†’ AM Ð¿Ñ€Ð¸ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸ÐºÐ¾Ð²
- [ ] CM â†’ AM Ð¿Ñ€Ð¸ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸ DM Ð¿Ð¾Ð·Ð°Ð´Ð¸
- [ ] CM Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ° Ð¿Ñ€Ð¸ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸ FR Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸
- [ ] CM Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ° Ð¿Ñ€Ð¸ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸ AM Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸

#### **DM â†’ AM:**
- [ ] DM â†’ AM Ð¿Ñ€Ð¸ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸ÐºÐ¾Ð²
- [ ] DM â†’ AM Ð¿Ñ€Ð¸ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸ CM Ð¿Ð¾Ð·Ð°Ð´Ð¸
- [ ] DM Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ° Ð¿Ñ€Ð¸ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸ CM Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸
- [ ] DM Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ° Ð¿Ñ€Ð¸ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸ FR Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸
- [ ] DM Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ° Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ 3-6-1 (ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ DM)

### **Ð¡Ð»Ð¾Ð¶Ð½Ñ‹Ðµ ÑÐ»ÑƒÑ‡Ð°Ð¸:**
- [ ] ÐœÐ½Ð¾Ð¶ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ CM Ñ DM
- [ ] Ð¡Ð¼ÐµÑˆÐ°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸ÐºÐ¸ (CM + DM + FR)
- [ ] Ð“Ñ€Ð°Ð½Ð¸Ñ‡Ð½Ñ‹Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ (LM, RM Ð½Ðµ ÑƒÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ)

### **Ð¡Ð¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚ÑŒ:**
- [ ] Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ¹ Ð»Ð¾Ð³Ð¸ÐºÐ¾Ð¹ Ð²Ð¸Ð½Ð³ÐµÑ€Ð¾Ð²
- [ ] Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÐµÐ¹ 4-2-4
- [ ] Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð»Ð¾Ð³Ð¸ÐºÐ¾Ð¹ FR

## Ð—Ð°ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ

**Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾ Ð¸ ÑƒÐ»ÑƒÑ‡ÑˆÐ°ÐµÑ‚ Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÑƒÑŽ ÑÐ¾Ð³Ð»Ð°ÑÐ¾Ð²Ð°Ð½Ð½Ð¾ÑÑ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹.**

### **ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:**
âœ… **Ð•Ð´Ð¸Ð½Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ°:** CM Ð¸ DM Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ Ð¾Ð´Ð¸Ð½Ð°ÐºÐ¾Ð²Ñ‹Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð° Ð´Ð»Ñ AM  
âœ… **Ð¢Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ°:** AM ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ÑÑ Ð¸Ð· ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð¿ÐµÑ€ÐµÐ´Ð½ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸ÐºÐ°  
âœ… **Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ:** Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ Ð»ÑŽÐ±Ñ‹Ð¼Ð¸ ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸ÑÐ¼Ð¸ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸ÐºÐ¾Ð²  
âœ… **Ð¡Ð¾Ð³Ð»Ð°ÑÐ¾Ð²Ð°Ð½Ð½Ð¾ÑÑ‚ÑŒ:** Ð¡Ð¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ Ð»Ð¾Ð³Ð¸ÐºÐµ FR â†’ AM  
âœ… **ÐŸÑ€ÐµÐ´ÑÐºÐ°Ð·ÑƒÐµÐ¼Ð¾ÑÑ‚ÑŒ:** Ð§ÐµÑ‚ÐºÐ¸Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð° Ð´Ð»Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹  

### **Ð“Ð¾Ñ‚Ð¾Ð²Ð½Ð¾ÑÑ‚ÑŒ:**
- âœ… ÐšÐ¾Ð´ Ð¿Ñ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð½Ð° ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸
- âœ… Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸
- âœ… Ð¡Ð¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ñ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ð¾Ð¹
- âœ… Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð°

**Ð”Ð°Ñ‚Ð° Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ:** 6 ÑÐ½Ð²Ð°Ñ€Ñ 2026  
**Ð’ÐµÑ€ÑÐ¸Ñ:** v0.926  
**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** Ð“Ð¾Ñ‚Ð¾Ð²Ð¾ Ðº Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÑŽ